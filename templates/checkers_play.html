<!DOCTYPE html>
<html>
<head>
   <title>Checkers Game</title>
   <style>
       body {
           font-family: Arial, sans-serif;
           max-width: 800px;
           margin: 0 auto;
           padding: 20px;
           text-align: center;
       }

       .game-container {
           display: flex;
           flex-direction: column;
           align-items: center;
           gap: 20px;
       }

       .game-status {
           font-size: 1.2em;
           padding: 10px;
           margin: 10px 0;
           border-radius: 5px;
       }

       .game-status.red-turn {
           background-color: #ffebee;
           color: #c62828;
       }

       .game-status.black-turn {
           background-color: #263238;
           color: white;
       }

       .must-capture {
           color: #d32f2f;
           font-weight: bold;
       }

       .board {
           display: inline-block;
           border: 4px solid #4a4a4a;
           border-radius: 4px;
           background: #4a4a4a;
           padding: 2px;
           box-shadow: 0 4px 8px rgba(0,0,0,0.2);
       }

       .row {
           display: flex;
           height: 60px;
       }

       .cell {
           width: 60px;
           height: 60px;
           display: flex;
           align-items: center;
           justify-content: center;
           position: relative;
       }

       .cell.light {
           background-color: #eeeed2;
       }

       .cell.dark {
           background-color: #769656;
       }

       .cell.selected {
           background-color: #baca44;
       }

       .cell.valid-move {
           position: relative;
       }

       .cell.valid-move::after {
           content: '';
           position: absolute;
           width: 20px;
           height: 20px;
           background-color: rgba(255, 255, 0, 0.3);
           border-radius: 50%;
           pointer-events: none;
       }

       .piece {
           width: 50px;
           height: 50px;
           border-radius: 50%;
           border: 2px solid #333;
           box-sizing: border-box;
           cursor: pointer;
           transition: transform 0.2s;
       }

       .piece:hover {
           transform: scale(1.1);
       }

       .piece.red {
           background: radial-gradient(circle at 30% 30%, #ff4444 0%, #cc0000 100%);
           box-shadow: 0 2px 4px rgba(0,0,0,0.2);
       }

       .piece.black {
           background: radial-gradient(circle at 30% 30%, #666 0%, #333 100%);
           box-shadow: 0 2px 4px rgba(0,0,0,0.2);
       }

       .piece.king::after {
           content: 'â™”';
           position: absolute;
           color: gold;
           font-size: 24px;
           text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
       }

       .game-over {
           font-size: 1.5em;
           font-weight: bold;
           padding: 20px;
           background-color: #f5f5f5;
           border-radius: 8px;
           margin: 20px 0;
       }

       button {
           padding: 10px 20px;
           font-size: 1.1em;
           border: none;
           border-radius: 5px;
           background-color: #4CAF50;
           color: white;
           cursor: pointer;
           transition: background-color 0.2s;
       }

       button:hover {
           background-color: #45a049;
       }
   </style>
</head>
<body>
   <div class="game-container">
       <h1>Checkers Game</h1>

       {% if game_over %}
           <div class="game-over">
               Game Over! {{ winner|title }} wins!
           </div>
       {% else %}
           <div class="game-status {{ current_player }}-turn">
               {{ current_player|title }}'s Turn
               {% if must_capture %}
                   <div class="must-capture">Capture move required!</div>
               {% endif %}
           </div>
       {% endif %}

       <div class="board">
           {% for row in range(8) %}
           <div class="row">
               {% for col in range(8) %}
               <div class="cell
                   {{- ' dark' if (row + col) % 2 == 1 else ' light' -}}
                   {{- ' selected' if selected_piece == (row, col) -}}
                   {{- ' valid-move' if (row, col) in valid_moves -}}">
                   {% if board[row][col] %}
                       <form action="{{ url_for('select_piece') }}" method="post" style="margin: 0;">
                           <input type="hidden" name="row" value="{{ row }}">
                           <input type="hidden" name="col" value="{{ col }}">
                           <button type="submit" class="piece
                               {{- ' ' + board[row][col]['color'] -}}
                               {{- ' king' if board[row][col]['king'] -}}"
                               {%- if board[row][col]['color'] != current_player
                                  or game_over %} disabled{% endif %}
                               style="border: none; padding: 0; background: none;">
                           </button>
                       </form>
                   {% elif (row, col) in valid_moves %}
                       <form action="{{ url_for('move') }}" method="post" style="margin: 0;">
                           <input type="hidden" name="row" value="{{ row }}">
                           <input type="hidden" name="col" value="{{ col }}">
                           <button type="submit" style="width: 100%; height: 100%;
                                                      opacity: 0; cursor: pointer;">
                           </button>
                       </form>
                   {% endif %}
               </div>
               {% endfor %}
           </div>
           {% endfor %}
       </div>
       <form action="{{ url_for('new_game') }}" method="post">
           <button type="submit">Start New Game</button>
       </form>
   </div>
</body>
</html>